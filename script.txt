
--CREAZIONE TABELLE

--Tabella pacchetti (ID, Num_persone)
CREATE TABLE PACCHETTI(
    ID INTEGER,
    Num_persone NUMBER(4) NOT NULL,
   
    CONSTRAINT PK_PACCHETTI PRIMARY KEY (ID)
);


CREATE TABLE SPOSTAMENTI (
    ID INTEGER,
    Luogo_partenza VARCHAR2(100) NOT NULL,
    Orario_partenza CHAR(8) NOT NULL,
    Luogo_arrivo VARCHAR2(100) NOT NULL,
    Orario_arrivo CHAR(8) NOT NULL,
    Latitudine_partenza CHAR(15) NOT NULL,   
    Longitudine_partenza CHAR(15) NOT NULL,
    Latitudine_arrivo CHAR(15) NOT NULL,
    Longitudine_arrivo CHAR(15) NOT NULL,
    Data_arrivo DATE NOT NULL,
    Data_partenza DATE NOT NULL,

    CONSTRAINT PK_SPOSTAMENTI PRIMARY KEY (ID),
    CONSTRAINT CK_Orario_partenza CHECK (Orario_partenza LIKE '%:%'),
    CONSTRAINT CK_Orario_arrivo CHECK (Orario_arrivo LIKE '%:%'),
    CONSTRAINT CK_Data_Spostamenti CHECK (NOT(Data_arrivo<Data_partenza))
);

--SOGGIORNI (Id_soggiorno, Albergo:ALBERGHI)
CREATE TABLE SOGGIORNI(
    Id_soggiorno CHAR(5),
    Albergo INTEGER NOT NULL,

    CONSTRAINT PK_SOGGIORNI PRIMARY KEY (Id_soggiorno),
    CONSTRAINT UQ_SOGGIORNI UNIQUE (Albergo)
);

--ALBERGHI (Id_albergo, Tipologia, Costo, Nome, Data_checkIn,Data_checkOut)
CREATE TABLE ALBERGHI(
    Id_albergo INTEGER,
    Tipologia VARCHAR2(100) NOT NULL,
    Costo FLOAT NOT NULL,
    Nome VARCHAR2(100) NOT NULL,
    Data_checkIn DATE NOT NULL,
    Data_checkOut DATE NOT NULL,

    CONSTRAINT CK_DATA_CHECK_IN CHECK (NOT(Data_checkIn>Data_checkOut)),
    CONSTRAINT PK_ALBERGHI PRIMARY KEY(Id_albergo)
);

--SPOSTAMENTI_SCELTI(Id_pacchetto:PACCHETTI,Id_spostamento:SPOSTAMENTI)
CREATE TABLE SPOSTAMENTI_SCELTI(
    Id_pacchetto INTEGER NOT NULL,
    Id_spostamento INTEGER NOT NULL,

    CONSTRAINT PK_SPOSTAMENTI_SCELTI PRIMARY KEY(Id_pacchetto,Id_spostamento)
);

--SOGGIORNI_SCELTI(Id_pacchetto:PACCHETTI,Codice_Soggiorno:SOGGIORNI)
CREATE TABLE SOGGIORNI_SCELTI(
    Id_pacchetto INTEGER NOT NULL,
    Codice_soggiorno CHAR(5) NOT NULL,

    CONSTRAINT PK_SOGGIORNI_SCELTI PRIMARY KEY(Id_pacchetto,Codice_soggiorno)
);

--CAMERE (ID, Tipologia, Numero_occupanti,Soggiorno:SOGGIORNI)
CREATE TABLE CAMERE(
    ID INTEGER,
    Tipologia VARCHAR2(100) NOT NULL,
    Numero_occupanti INTEGER NOT NULL,
    Soggiorno CHAR(5) NOT NULL,

    CONSTRAINT PK_CAMERE PRIMARY KEY(ID)
);


CREATE TABLE MEZZI_DI_TRASPORTO(
    Id_mezzo INTEGER,
    Num_viaggiatori NUMBER(5) NOT NULL,
    Num_Mezzi NUMBER(2) DEFAULT 1,
    Tempo_percorrenza CHAR(5) NOT NULL,
    Prezzo FLOAT NOT NULL,
    Id_spostamento INTEGER NOT NULL,

    CONSTRAINT PK_MEZZI_DI_TRASPORTO PRIMARY KEY(Id_mezzo)
);


CREATE TABLE PRENOTAZIONI (
    Codice_prenotazione INTEGER,
    Data_partenza DATE NOT NULL,
    Data_ritorno DATE NOT NULL,
    Costo_complessivo FLOAT NOT NULL,
    Pacchetto INTEGER NOT NULL,
    Utente  CHAR(16) NOT NULL,

    CONSTRAINT PK_PRENOTAZIONI PRIMARY KEY(Codice_prenotazione),
    CONSTRAINT CK_Data_Prenotazioni CHECK (NOT(Data_ritorno<Data_partenza))
);

--VIAGGIATORI(Id_viaggiatore, Nome, Cognome, Prenotazione:PRENOTAZIONI)
CREATE TABLE VIAGGIATORI(
    Id_viaggiatore INTEGER,
    Nome VARCHAR2(100) NOT NULL,
    Cognome VARCHAR2(100) NOT NULL,
    Prenotazione INTEGER NOT NULL,

    CONSTRAINT PK_OSPITI PRIMARY KEY(Id_viaggiatore)
);

--UTENTI (Codice_fiscale, Nome, Cognome)
CREATE TABLE UTENTI(
    Codice_fiscale CHAR(16),
    Nome VARCHAR2(100) NOT NULL,
    Cognome VARCHAR2(100) NOT NULL,
    
    CONSTRAINT PK_UTENTI PRIMARY KEY(Codice_fiscale)
);


--SERVIZI OFFERTI (Cod_servizio, Tipo,Camera:CAMERE)
CREATE TABLE SERVIZI_OFFERTI (
    Cod_servizio INTEGER,
    Tipo VARCHAR2(100) NOT NULL,
    Camera NUMBER(7) NOT NULL,

    CONSTRAINT PK_SERVIZI PRIMARY KEY (Cod_servizio)
);


CREATE TABLE ARCHIVIO_PRENOTAZIONI(
    Codice INTEGER,
    Costo INTEGER NOT NULL,
    Data_partenza DATE NOT NULL,
    Data_ritorno DATE NOT NULL, 
    Pacchetto INTEGER NOT NULL,
    Utenti CHAR(16) NOT NULL,

    CONSTRAINT PK_ARCHIVIO_PRENOTAZIONI PRIMARY KEY (Codice),
    CONSTRAINT CK_Data__Archivio_Prenotazioni CHECK (NOT(Data_ritorno<Data_partenza))
);

--CREAZIONE SEQUENZE PER I PACCHETTI
CREATE SEQUENCE Contatore_PACCHETTO START WITH 1 INCREMENT BY 1 MAXVALUE 100 NOCYCLE;
CREATE SEQUENCE Contatore_Prentazioni START WITH 1 INCREMENT BY 1 MAXVALUE 100 NOCYCLE;

--CREAZIONE DEI VINCOLI D'INTEGRITA' REFERENZIALE (CHIAVI ESTERNE)
ALTER TABLE SPOSTAMENTI_SCELTI ADD CONSTRAINT FK_SPOSTAMENTI_SCELTI_PACCHETTI 
FOREIGN KEY (Id_pacchetto) REFERENCES PACCHETTI(ID) ON DELETE CASCADE;

ALTER TABLE SPOSTAMENTI_SCELTI ADD CONSTRAINT FK_SPOSTAMENTI_SCELTI_
FOREIGN KEY (Id_spostamento) REFERENCES SPOSTAMENTI(ID) ON DELETE CASCADE;

ALTER TABLE SOGGIORNI_SCELTI ADD CONSTRAINT FK_SOGGIORNI_SCELTI_PACCHETTI 
FOREIGN KEY (Id_pacchetto) REFERENCES PACCHETTI(ID) ON DELETE CASCADE;

ALTER TABLE SOGGIORNI_SCELTI ADD CONSTRAINT FK_SOGGIORNI_SCELTI_SOGGIORNI
FOREIGN KEY (Codice_soggiorno) REFERENCES SOGGIORNI(Id_soggiorno) ON DELETE CASCADE;

ALTER TABLE MEZZI_DI_TRASPORTO  ADD CONSTRAINT FK_MEZZI_DI_TRASPORTO_SPOSTAMENTI 
FOREIGN KEY (Id_spostamento) REFERENCES SPOSTAMENTI(ID) ON DELETE CASCADE;

ALTER TABLE SOGGIORNI ADD CONSTRAINT FK_SOGGIORNI_ALBERGHI 
FOREIGN KEY (Albergo) REFERENCES ALBERGHI(Id_albergo) ON DELETE CASCADE;

ALTER TABLE CAMERE ADD CONSTRAINT FK_CAMERE_SOGGIORNI 
FOREIGN KEY (Soggiorno) REFERENCES SOGGIORNI(Id_soggiorno) ON DELETE CASCADE;

ALTER TABLE SERVIZI_OFFERTI ADD CONSTRAINT FK_SERVIZI_OFFERTI_CAMERE 
FOREIGN KEY (Camera) REFERENCES CAMERE(ID) ON DELETE CASCADE;

ALTER TABLE PRENOTAZIONI ADD CONSTRAINT FK_PRENOTAZIONI_PACCHETTO 
FOREIGN KEY (Pacchetto) REFERENCES PACCHETTI(ID) ON DELETE CASCADE;

ALTER TABLE PRENOTAZIONI ADD CONSTRAINT FK_PRENOTAZIONI_UTENTI 
FOREIGN KEY (Utente) REFERENCES UTENTI(Codice_fiscale) ON DELETE CASCADE;

ALTER TABLE VIAGGIATORI ADD CONSTRAINT FK_VIAGGIATORI_PRENOTAZIONI 
FOREIGN KEY (Prenotazione) REFERENCES PRENOTAZIONI(Codice_prenotazione) ON DELETE CASCADE;

ALTER TABLE CARTE_DI_CREDITO ADD CONSTRAINT FK_CARTE_DI_CREDITO_UTENTI 
FOREIGN KEY (Utente) REFERENCES UTENTI(Codice_fiscale) ON DELETE CASCADE;

ALTER TABLE BONIFICI_BANCARI ADD CONSTRAINT FK_BONIFICI_BANCARI_UTENTI  
FOREIGN KEY (Utente) REFERENCES UTENTI(Codice_fiscale) ON DELETE CASCADE;


--POPOLAMENTO DELLA BASE DI DATI

--INSERIMENTO PACCHETTI
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 2);
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 5);
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 3);     
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 4);
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 8);
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 1);
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 2); 
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 2);
   INSERT INTO PACCHETTI VALUES (Contatore_PACCHETTO.NEXTVAL, 1);  


--INSERIMENTO SPOSTAMENTI,                IN APEX CAMBIA IL TIPO DATE!!!!!!!!!!!
    INSERT INTO SPOSTAMENTI VALUES (100,'Napoli','10:00:00','Francoforte','12:05:00','40G50P00S N','14G25P17S E','50G01P58S N','08G34P12S E','03/28/2023','03/28/2023');
    INSERT INTO SPOSTAMENTI VALUES (101,'Napoli','12:00:00','Parigi','14:25:00','40G50P00S N','14G25P17S E','48G86P31S N','02G33P97S E','04/08/2023','04/08/2023');
    INSERT INTO SPOSTAMENTI VALUES (102,'Budapest','15:00:00','Roma', '17:30:00','41G90278S N','12G49636S E','47G49791S N','19G04023S E','04/12/2023','04/12/2023');
    INSERT INTO SPOSTAMENTI VALUES (103,'Londra','19:00:00','Madrid', '22:00:00', '40G41677S N','-3G70379S E','51G50735S N','-0G12775S E' ,'04/14/2023','04/14/2023');
    INSERT INTO SPOSTAMENTI VALUES (104,'Parigi','19:00:00','Milano', '20:30:00', '45G46542S N','9G18592S E','48G85661S N','2G35222S E' ,'04/18/2023','04/18/2023');
    INSERT INTO SPOSTAMENTI VALUES (110,'Roma','12:00:00','Francoforte','15:00:00','47G49791S N','19G04023S E','50G01P58S N','08G34P12S E','03/25/2023','03/25/2023');
    INSERT INTO SPOSTAMENTI VALUES (111,'Milano','10:00:00','Francoforte','11:50:00','48G85661S N','2G35222S E','50G01P58S N','08G34P12S E','03/22/2023','03/22/2023');
    INSERT INTO SPOSTAMENTI VALUES (120,'Londra','12:00:00','Parigi','13:25:00','40G41677S N','-3G70379S E','48G86P31S N','02G33P97S E','04/09/2023','04/09/2023');
    INSERT INTO SPOSTAMENTI VALUES (121,'Roma','12:00:00','Parigi','13:25:00','47G49791S N','19G04023S E','48G86P31S N','02G33P97S E','04/09/2023','04/09/2023');

--INSERIMENTO ALBERGHI
    INSERT INTO ALBERGHI VALUES (200,'3 STELLE',100.0,'HAMPTON FRANKFURT', '03/28/2023', '04/03/2023');                   
    INSERT INTO ALBERGHI VALUES (201,'4 STELLE',150.0,'MARITM HOTEL FRANKFURT', '03/25/2023', '03/30/2023');
    INSERT INTO ALBERGHI VALUES (202,'5 STELLE',300.0,'FRANKFURT MARRIOTT HOTEL', '03/22/2023', '03/28/2023');
    INSERT INTO ALBERGHI VALUES (400,'3 STELLE',120.0,'HOTEL ELYSEES OPERA DE PARIS', '04/08/2023', '04/15/2023');
    INSERT INTO ALBERGHI VALUES (401,'4 STELLE',180.0,'HOTEL LE 10 BIS PARIS', '04/09/2023', '04/19/2023');
    INSERT INTO ALBERGHI VALUES (402,'5 STELLE',400.0,'LA TREMOILLE PARIS', '04/09/2023', '04/12/2023');
    INSERT INTO ALBERGHI VALUES (500,'4 STELLE',400.0,'TOTTI GOL', '04/12/2023', '04/15/2023');
    INSERT INTO ALBERGHI VALUES (600,'4 STELLE',300.0,'PLAZA MADRAZO HOTEL', '04/14/2023', '04/20/2023');
    INSERT INTO ALBERGHI VALUES (700,'3 STELLE',250.0,' POLENTA SQUARE HOTEL', '04/18/2023', '04/21/2023');


--INSERIMENTO SOGGIORNI
   INSERT INTO SOGGIORNI VALUES(1990,200);
   INSERT INTO SOGGIORNI VALUES(1991,201);
   INSERT INTO SOGGIORNI VALUES(1992, 202);
   INSERT INTO SOGGIORNI VALUES(1993, 400);   
   INSERT INTO SOGGIORNI VALUES(1994, 401); 
   INSERT INTO SOGGIORNI VALUES(1995, 402);
   INSERT INTO SOGGIORNI VALUES(1996, 500);
   INSERT INTO SOGGIORNI VALUES(1997, 600);
   INSERT INTO SOGGIORNI VALUES(1998, 700);



--INSERIMENTO SPOSTAMENTI SCELTI
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (1,120);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (2, 100);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (3, 101);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (4, 102);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (5, 103);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (6, 104);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (8, 110);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (9, 111);
   INSERT INTO SPOSTAMENTI_SCELTI VALUES (7, 121);

   --INSERIMENTO SOGGIORNI SCELTI
    INSERT INTO SOGGIORNI_SCELTI VALUES (1,1995);
   INSERT INTO SOGGIORNI_SCELTI  VALUES (2, 1990);
   INSERT INTO SOGGIORNI_SCELTI  VALUES (3, 1993);
   INSERT INTO SOGGIORNI_SCELTI  VALUES (4, 1996);
   INSERT INTO SOGGIORNI_SCELTI VALUES (5, 1997);
   INSERT INTO SOGGIORNI_SCELTI  VALUES (6, 1998);
   INSERT INTO SOGGIORNI_SCELTI  VALUES (8, 1991);
   INSERT INTO SOGGIORNI_SCELTI VALUES (9, 1992);
   INSERT INTO SOGGIORNI_SCELTI  VALUES (7, 1994);


--INSERIMENTO CAMERE
   INSERT INTO CAMERE VALUES (45, 'Standard',5 ,1990);
   INSERT INTO CAMERE VALUES (46, 'Camera doppia',2 ,1991);
   INSERT INTO CAMERE VALUES (47, 'Camera singola',1 ,1992);
   INSERT INTO CAMERE VALUES (48, 'Tripla',3 ,1993);
   INSERT INTO CAMERE VALUES (49, 'Suite nunziale',2 ,1994);
   INSERT INTO CAMERE VALUES (50, 'Camera doppia deluxe',2 ,1995);
   INSERT INTO CAMERE VALUES (51, 'Quadrupla standard',4 ,1996);
   INSERT INTO CAMERE VALUES (52, 'Stanza attigua standard',8 ,1997);
   INSERT INTO CAMERE VALUES (53, 'Suite presidenziale',1 ,1998);


--INSERIMENTO MEZZI DI TRASPORTO                    
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (60,2,1,'1h25m',200 ,120);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (61,2,1,'1h25m',200 ,121);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (62,5,1,'2h05m',280 ,100);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (63,3,1,'1h25m',200 ,101);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (64,4,1,'2h30m',250 ,102);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (65,8,2,'3h00m',400 ,103);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (66,1,1,'1h25m',100 ,104);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (67,2,1,'3h00m',200 ,110);
   INSERT INTO MEZZI_DI_TRASPORTO VALUES (68,1,1,'1h50m',150 ,111);


--INSERIMENTO UTENTI
    INSERT INTO UTENTI VALUES ('NSCDNR40R23Z602Y', UPPER('Edson Arantes Nascimento'), UPPER ('Pele'));
    INSERT INTO UTENTI VALUES ('VLLGLC64L09D150M', UPPER('Gianluca'), UPPER ('Vialli'));
    INSERT INTO UTENTI VALUES ('NSGLNZ91H04F839X', UPPER('Lorenzo'), UPPER ('Insigne'));
    INSERT INTO UTENTI VALUES ('MRDDRM60R30Z600D', UPPER('Diego Armando'), UPPER ('Maradona'));
    INSERT INTO UTENTI VALUES ('FBNCNNVR0GA8GTAN', UPPER('Fabioo'), UPPER ('Cannavaro'));
    INSERT INTO UTENTI VALUES ('KNYWST89QTY8UZNS', UPPER('Kanye Omari'), UPPER ('West'));
    INSERT INTO UTENTI VALUES ('BRTNSPRS98AEDQ12', UPPER('Britney'), UPPER ('Spears'));
    INSERT INTO UTENTI VALUES ('BRNMRS28NBMNAQS3', UPPER('Bruno'), UPPER ('Mars'));
    INSERT INTO UTENTI VALUES ('REYMSTRO619HHBN5', UPPER('Rey'), UPPER ('Mysterio'));
    

--INSERIMENTO PRENOTAZIONI 
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '03/28/2023', '04/03/2023',380, 2, 'NSCDNR40R23Z602Y');
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '04/08/2023', '04/15/2023', 320, 3, 'VLLGLC64L09D150M');
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '04/12/2023', '04/15/2023', 650, 4, 'NSGLNZ91H04F839X' );
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '04/14/2023', '04/20/2023', 700, 5, 'MRDDRM60R30Z600D' );
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '04/18/2023', '04/21/2023', 350, 6, 'FBNCNNVR0GA8GTAN' );
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '03/25/2023', '03/30/2023', 300, 8, 'KNYWST89QTY8UZNS' );
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '03/22/2023', '03/28/2023', 450, 9, 'BRTNSPRS98AEDQ12' );
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '04/09/2023', '04/12/2023', 380, 1, 'BRNMRS28NBMNAQS3' );
   INSERT INTO PRENOTAZIONI VALUES (Contatore_Prenotazioni.NEXTVAL, '04/09/2023', '04/19/2023', 380, 7, 'REYMSTRO619HHBN5' );
  

--INSERIMENTO VIAGGIATORI
   INSERT INTO VIAGGIATORI VALUES (551, UPPER('Edson Arantes Nascimento'), UPPER ('Pele'), 2);
   INSERT INTO VIAGGIATORI VALUES (552, UPPER('Roberto'), UPPER ('Carlos'), 2);
   INSERT INTO VIAGGIATORI VALUES (553, UPPER('Alexandre'), UPPER ('Pato'), 2);
   INSERT INTO VIAGGIATORI VALUES (554, UPPER('Ricardo'), UPPER ('Kaka'), 2);
   INSERT INTO VIAGGIATORI VALUES (555, UPPER('Neymar'), UPPER ('Jr'), 2);
   INSERT INTO VIAGGIATORI VALUES (331,  UPPER('Gianluca'), UPPER ('Vialli'), 3);
   INSERT INTO VIAGGIATORI VALUES (332,  UPPER('Roberto'), UPPER ('Mancini'), 3);
   INSERT INTO VIAGGIATORI VALUES (333,  UPPER('Franco'), UPPER ('Ricciardi'), 3);
   INSERT INTO VIAGGIATORI VALUES (440,  UPPER('Lorenzo'), UPPER ('Insigne'), 4);
   INSERT INTO VIAGGIATORI VALUES (441,  UPPER('Marco'), UPPER ('Verratti'), 4);
   INSERT INTO VIAGGIATORI VALUES (442,  UPPER('Ciro'), UPPER ('Immobile'), 4);
   INSERT INTO VIAGGIATORI VALUES (443,  UPPER('Zdnek'), UPPER ('Zeman'), 4);
   INSERT INTO VIAGGIATORI VALUES (80,   UPPER('Diego Armando'), UPPER ('Maradona'), 5);
   INSERT INTO VIAGGIATORI VALUES (81,   UPPER('Lionel'), UPPER ('Messi'), 5);
   INSERT INTO VIAGGIATORI VALUES (82,   UPPER('Franco'), UPPER ('Baresi'), 5);
   INSERT INTO VIAGGIATORI VALUES (83,   UPPER('Sergio'), UPPER ('Busquets'), 5);
   INSERT INTO VIAGGIATORI VALUES (84,   UPPER('Bruno'), UPPER ('Giordano'), 5);
   INSERT INTO VIAGGIATORI VALUES (85,   UPPER('Ezequiel'), UPPER ('Lavezzi'), 5);
   INSERT INTO VIAGGIATORI VALUES (86,   UPPER('Edinson'), UPPER ('Cavani'), 5);
   INSERT INTO VIAGGIATORI VALUES (87,   UPPER('German'), UPPER ('Denis'), 5);

   INSERT INTO VIAGGIATORI VALUES (10,  UPPER('Fabioo'), UPPER ('Cannavaro'), 6);
   INSERT INTO VIAGGIATORI VALUES (1,  UPPER('Kanye Omari'), UPPER ('West'), 8);
   INSERT INTO VIAGGIATORI VALUES (2,  UPPER('Kim Kardashian'), UPPER ('West'), 8);
   INSERT INTO VIAGGIATORI VALUES (11,   UPPER('Britney'), UPPER ('Spears'), 9);
   INSERT INTO VIAGGIATORI VALUES (21,   UPPER('Bruno'), UPPER ('Mars'), 1);
   INSERT INTO VIAGGIATORI VALUES (22,   UPPER('Fabio'), UPPER ('Greco'), 1);
   INSERT INTO VIAGGIATORI VALUES (619,  UPPER('Rey'), UPPER ('Mysterio'), 7);
   INSERT INTO VIAGGIATORI VALUES (620,  UPPER('Santino'), UPPER ('Marella'), 7);



--INSERIMENTO SERVIZI_OFFERTI
   INSERT INTO SERVIZI_OFFERTI VALUES (59, 'Parcheggio gratuito e WI-FI', 45);
   INSERT INTO SERVIZI_OFFERTI VALUES (33, 'Spa e pacchetti benessere', 46);
   INSERT INTO SERVIZI_OFFERTI VALUES (63, 'Servizio in camera', 47);
   INSERT INTO SERVIZI_OFFERTI VALUES (72, 'Colazione gratuita', 48);
   INSERT INTO SERVIZI_OFFERTI VALUES (69, 'Camere insonorizzate', 49);
   INSERT INTO SERVIZI_OFFERTI VALUES (88, 'All inclusive', 50);
   INSERT INTO SERVIZI_OFFERTI VALUES (90, 'Area giochi bambini', 51);
   INSERT INTO SERVIZI_OFFERTI VALUES (92, 'Animali ammessi e purificazione stanze', 52);
   INSERT INTO SERVIZI_OFFERTI VALUES (93, 'Aria condizionata', 53);

--INSERIMENTO  ARCHIVIO_PRENOTAZIONI
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (11, 380, '03/28/2023', '04/03/2023', 2, 'NSCDNR40R23Z602Y');
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (12, 320, '04/08/2023', '04/15/2023', 3, 'VLLGLC64L09D150M');
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (13, 650, '04/12/2023', '04/15/2023', 4, 'NSGLNZ91H04F839X' );
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (14, 700, '04/14/2023', '04/20/2023', 5, 'MRDDRM60R30Z600D' );
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (15, 350, '04/18/2023', '04/21/2023', 6, 'FBNCNNVR0GA8GTAN' );
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (16, 300, '03/25/2023', '03/30/2023', 8, 'KNYWST89QTY8UZNS' );
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (17, 450, '03/22/2023', '03/28/2023', 9, 'BRTNSPRS98AEDQ12' );
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (18, 380, '04/09/2023', '04/12/2023',  1, 'BRNMRS28NBMNAQS3' );
   INSERT INTO  ARCHIVIO_PRENOTAZIONI VALUES (19, 380, '04/09/2023', '04/19/2023', 7, 'REYMSTRO619HHBN5' );

--INSERIMENTO PAGAMENTI CARTE DI CREDITO
   INSERT INTO CARTE_DI_CREDITO VALUES (300, 'Visa','Edson Arantes Nascimento Pele', 489, '02/01/2027', 'NSCDNR40R23Z602Y');
   INSERT INTO CARTE_DI_CREDITO VALUES (301, 'Matercard','Gianluca Vialli', 238, '08/04/2028', 'VLLGLC64L09D150M');
   INSERT INTO CARTE_DI_CREDITO VALUES (302, 'Matercard','Lorenzo Insigne', 741, '03/06/2028', 'NSGLNZ91H04F839X' );
   INSERT INTO CARTE_DI_CREDITO VALUES (303, 'Visa','Diego Armando Maradona', 854, '03/19/2027','MRDDRM60R30Z600D' );

--INSERIMENTO PAGAMENTI BONIFICO
  INSERT INTO BONIFICI_BANCARI VALUES (500,'04/08/2023' , 'FBNCNNVR0GA8GTAN' );
  INSERT INTO BONIFICI_BANCARI VALUES (501,'03/02/2023' , 'KNYWST89QTY8UZNS' );
  INSERT INTO BONIFICI_BANCARI VALUES (502,'03/05/2023' , 'BRTNSPRS98AEDQ12' );
  INSERT INTO BONIFICI_BANCARI VALUES (503,'04/07/2023' , 'BRNMRS28NBMNAQS3' );
  INSERT INTO BONIFICI_BANCARI VALUES (504,'04/01/2023' , 'REYMSTRO619HHBN5' )



--CREAZIONE INDICI
CREATE INDEX INDICE_SPOSTAMENTI_Luogo_partenza ON SPOSTAMENTI(Luogo_partenza);
CREATE INDEX INDICE_SPOSTAMENTI_Luogo_arrivo ON SPOSTAMENTI(Luogo_arrivo);
CREATE INDEX INDICE_SPOSTAMENTI_Data_partenza ON SPOSTAMENTI(Data_partenza);
CREATE INDEX INDICE_ALBERGHI_Tipologia ON ALBERGHI(Tipologia);
CREATE INDEX INDICE_CAMERE_Tipologia ON CAMERE(Tipologia);
CREATE INDEX INDICE_SERVIZI_OFFERTI_Tipo ON SERVIZI_OFFERTI(Tipo);
CREATE INDEX INDICE_PACCHETTI_Num_persone ON PACCHETTI(Num_persone);



--CREAZIONE VISTE

--Una vista in cui Ã¨ possibile visualizzare tutte le prenotazioni effettuate da ogni utente

CREATE OR REPLACE VIEW Report_Prenotazioni AS 
SELECT 
U.Codice_fiscale, U.Nome, U.Cognome,
P1.Codice_prenotazione, P1.Costo_complessivo AS CostoPrenotazione, P1.Data_partenza, P1.Data_ritorno, P1.Pacchetto AS Pacchetto_Prenotato
FROM 
 UTENTI U JOIN PRENOTAZIONI P1 ON U.Codice_fiscale=P1.Utente; 


--Vista che permette di visualizzare tutti i viaggi associati ad un pacchetto
CREATE MATERIALIZED VIEW SCHEDE_VIAGGI AS 
SELECT P.ID AS PACCHETTO_SCELTO, S2.Luogo_partenza, S2. Luogo_arrivo,S2.Data_partenza,S2.Data_arrivo,S2.Orario_partenza,S2.Orario_arrivo 
FROM (SPOSTAMENTI_SCELTI S1 JOIN PACCHETTI P ON P.ID=S1.Id_pacchetto) JOIN SPOSTAMENTI S2 ON S1.Id_spostamento=S2.ID;
 


--Mostra tutte le fatture dei pagamenti effettuati con carta di credito 
 CREATE VIEW Fattura_carta AS
 SELECT U.Codice_fiscale AS Utente, U.Nome, U.Cognome, CC.Intestatario, CC.Circuito AS Circuito_carta   --attento che nella tabella oracle ho messo 'cirtuiTo'
 FROM UTENTI U JOIN CARTE_DI_CREDITO CC ON U.Codice_fiscale=CC.Utente;


--Mostra tutte le fatture dei pagamenti effettuati tramite bonifico con la relativa data 
 CREATE VIEW Fattura_bonifici AS
 SELECT U.Codice_fiscale AS Utente, U.Nome, U.Cognome, BB.Data_bonifico  
 FROM UTENTI U JOIN BONIFICI_BANCARI BB ON U.Codice_fiscale=BB.Utente;



